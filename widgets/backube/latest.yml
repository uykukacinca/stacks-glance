- &backube-video-parameters
  perPage: 28
  skipTotal: 1
  expand: channel
  sort: -published
  fields: id,title,published,expand.channel.title,expand.channel.id

- &backube-latest
  type: custom-api
  title: Youtube Latest Videos
  cache: *no-cache
  frameless: true
  url: https://bt.${HOST_NAME}/api/collections/videos/records
  css-class: x-backube
  options:
    collapse-after-rows: 4
  parameters:
    <<: *backube-video-parameters
  template: |
    {{ $items := .JSON.Array `items.#.{"id":id,"title":title,"url":{"fn":!"replace","val":id,"href":!"https://www.youtube.com/watch?v={val}"},"header":[{"tpl":!"Title"}],"image":{"fn":!"replace","val":id,"src":!"https://i.ytimg.com/vi/{val}/hqdefault.jpg","overlays":[{"class":!"x-center x-play","tpl":!"PlayIcon"}]},"footer":[{"class":!"","tpl":!"WeirdTime","val":published},{"class":!"","tpl":!"Link","val":{"title":expand.channel.title,"link":{"fn":!"replace","val":expand.channel.id,"href":!"https://www.youtube.com/channel/{val}/videos" }}}]}`
    }}
    $include: /components/templates.gohtml
    $include: /components/media.gohtml
    $include: /components/media-container.gohtml
