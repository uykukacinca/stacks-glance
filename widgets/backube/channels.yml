- &backube-channels
  type: custom-api
  title: Youtube Channels
  cache: *no-cache
  frameless: true
  css-class: x-backube
  url: ${BACKUBE_URL}/api/collections/channels/records
  headers:
    Authorization: Bearer ${BACKUBE_TOKEN}
  parameters:
    perPage: 32
    skipTotal: 1
    fields: id,title,thumbnail,video_count,subscriber_count
    sort: -view_count
  options:
    collapse-after-rows: 10
  template: |
    {{ $items := .JSON.Array `items.#.{"id":id,"title":title,"url":{"fn":!"replace","val":id,"href":!"https://www.youtube.com/channel/{val}/videos"},"image":{"src":thumbnail,"class":!"x-ar-1x1 x-round"},"header":[{"tpl":!"ApproxNumber","val":subscriber_count,"label":!"Subscribers","class":!"shrink-0"}],"footer":[{"tpl":!"ApproxNumber","val":video_count,"label":!"Videos","class":!"shrink-0"}]}` }}
    $include: /components/templates.gohtml
    $include: /components/list.gohtml
    $include: /components/list-container.gohtml
